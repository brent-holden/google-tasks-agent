[Unit]
Description=Google Tasks Agent
After=network-online.target
Wants=network-online.target

[Service]
Type=oneshot
ExecStart={{HOME}}/.google-tasks-agent/venv/bin/google-tasks-agent
Environment="HOME={{HOME}}"
Environment="PATH=/usr/local/bin:/usr/bin:/bin"
Environment="ANTHROPIC_API_KEY={{ANTHROPIC_API_KEY}}"
Environment="CLAUDE_CODE_USE_VERTEX={{CLAUDE_CODE_USE_VERTEX}}"
Environment="ANTHROPIC_VERTEX_REGION={{ANTHROPIC_VERTEX_REGION}}"
Environment="ANTHROPIC_VERTEX_PROJECT_ID={{ANTHROPIC_VERTEX_PROJECT_ID}}"
Environment="GOOGLE_APPLICATION_CREDENTIALS={{HOME}}/.config/gcloud/application_default_credentials.json"
Environment="GOOGLE_TASKS_AGENT_USER_EMAIL={{USER_EMAIL}}"
StandardOutput=append:{{HOME}}/.google-tasks-agent/logs/systemd-stdout.log
StandardError=append:{{HOME}}/.google-tasks-agent/logs/systemd-stderr.log

[Install]
WantedBy=default.target
